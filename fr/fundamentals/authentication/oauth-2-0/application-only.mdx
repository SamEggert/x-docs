---
title: Authentification applicative seule et jeton d’accès OAuth 2.0 (Bearer)
sidebarTitle: OAuth 2.0 applicatif seul (jeton d’accès Bearer)
---

<div id="app-only-authentication-and-oauth-20-bearer-token">
  ### Authentification « App only » et jeton d’accès OAuth 2.0 (Bearer Token)
</div>

X offre aux applications la possibilité d’émettre des requêtes authentifiées pour le compte de l’application elle-même, plutôt que pour le compte d’un utilisateur spécifique. L’implémentation de X est basée sur le flux [Client Credentials Grant](http://tools.ietf.org/html/rfc6749#section-4.4) de la [spécification OAuth 2](http://tools.ietf.org/html/rfc6749).

L’authentification « application-only » n’inclut aucun contexte utilisateur et correspond à une forme d’authentification où une application effectue des requêtes API en son propre nom. Cette méthode s’adresse aux développeurs qui ont uniquement besoin d’un accès en lecture aux informations publiques.

Vous pouvez effectuer une authentification « application-only » à l’aide des consumer API keys de vos applications, ou en utilisant un jeton d’accès « App only » (Bearer Token). Cela signifie que les seules requêtes que vous pouvez adresser à une API X ne doivent pas nécessiter d’utilisateur authentifié.

Avec l’authentification « application-only », vous pouvez effectuer des actions telles que :

* Récupérer des chronologies d’utilisateurs
* Accéder aux abonnements et abonnés de n’importe quel compte
* Accéder aux ressources de listes
* Rechercher des Tweets

Veuillez noter que seuls [OAuth 1.0a](/fr/resources/fundamentals/authentication/oauth-1-0a/api-key-and-secret) ou le [flux OAuth 2.0 Authorization Code](/fr/resources/fundamentals/authentication/oauth-2-0/authorization-code) avec PKCE sont requis pour émettre des requêtes au nom des utilisateurs. La page [API reference](/fr/resources/fundamentals/authentication/api-reference) décrit la méthode d’authentification requise pour utiliser une API. Vous aurez besoin d’une authentification utilisateur, avec contexte utilisateur, et d’un [jeton d’accès](/fr/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens) pour effectuer les opérations suivantes :

* Publier des Tweets ou d’autres ressources
* Rechercher des utilisateurs
* Utiliser n’importe quel endpoint de géolocalisation
* Accéder aux Messages privés ou aux identifiants du compte
* Récupérer les adresses e-mail des utilisateurs

<div id="auth-flow">
  #### Flux d’authentification
</div>

Pour utiliser cette méthode, vous devez utiliser un [jeton d’accès en mode application uniquement](/fr/resources/fundamentals/authentication/oauth-2-0/application-only) (également appelé [jeton Bearer](/fr/resources/fundamentals/authentication/oauth-2-0/bearer-tokens)). Vous pouvez générer un jeton d’accès en mode application uniquement (jeton Bearer) en transmettant votre consumer key et votre consumer secret via le point de terminaison [POST oauth2/token](/fr/resources/fundamentals/authentication/api-reference#post-oauth2-token).

Le flux d’authentification « application-only » suit les étapes suivantes :

* L’application encode sa consumer key et son consumer secret en un ensemble d’identifiants spécialement encodés.
* L’application envoie une requête au point de terminaison [POST oauth2/token](/fr/resources/fundamentals/authentication/api-reference#post-oauth2-token) pour échanger ces identifiants contre un [jeton d’accès en mode application uniquement](/fr/resources/fundamentals/authentication/oauth-2-0/application-only).
* Lorsqu’elle accède à l’API REST, l’application utilise le jeton d’accès en mode application uniquement pour s’authentifier.

Comme il n’est pas nécessaire de signer une requête, cette approche est beaucoup plus simple que le modèle OAuth 1.0a standard.

<Frame>
  <img src="/images/auth-5.png.twimg.1920.png" alt="" />
</Frame>

<div id="about-application-only-auth">
  #### À propos de l’authentification « application-only »
</div>

**Les jetons sont des mots de passe**

Gardez à l’esprit que la consumer key et le consumer secret, ainsi que le jeton d’accès « App only » (Bearer Token), donnent la possibilité d’effectuer des requêtes au nom d’une application. Ces valeurs doivent être considérées comme aussi sensibles que des mots de passe et ne doivent en aucun cas être partagées ou distribuées à des tiers non fiables.

**SSL requis**

Toutes les requêtes (tant pour obtenir que pour utiliser les jetons) *doivent* utiliser des points de terminaison HTTPS. Suivez les bonnes pratiques détaillées dans [Connecting to X API using TLS](/fr/resources/fundamentals/authentication/guides/tls) — les pairs doivent **toujours** être vérifiés.

**Aucun contexte utilisateur**

Lors de l’envoi de requêtes avec l’authentification « application-only », il n’existe pas de notion d’« utilisateur actuel ». Par conséquent, des points de terminaison tels que [POST statuses/update](/fr/x-api/posts/creation-of-a-post) ne fonctionneront pas avec l’authentification « application-only ». Consultez [using OAuth](/fr/resources/fundamentals/authentication/oauth-1-0a/obtaining-user-access-tokens) pour plus d’informations sur l’émission de requêtes au nom d’un utilisateur.

**Limitation du débit (rate limiting)**

Les applications disposent de deux types de pools de limitation du débit.

Les requêtes effectuées au nom d’utilisateurs avec des jetons d’accès, également appelées « contexte utilisateur », sont décomptées d’un contexte de limitation du débit différent de celui utilisé par l’authentification « application-only ». En d’autres termes, les requêtes effectuées au nom d’utilisateurs n’entament pas les limites disponibles via l’authentification « app-only », et les requêtes effectuées via l’authentification « app-only » n’entament pas les limites utilisées dans l’authentification basée sur l’utilisateur.

En savoir plus sur [API Rate Limiting](/fr/x-api/fundamentals/rate-limits) et [review the limits](https://developer.x.com/en/portal/products).

<div id="issuing-application-only-requests">
  #### Émettre des requêtes en mode application uniquement
</div>

**Étape 1 : Encoder la clé et le secret consommateur**

Voici les étapes pour encoder la clé et le secret consommateur d’une application en un ensemble d’identifiants afin d’obtenir un jeton Bearer :

1. Encodez la clé et le secret consommateur en URL conformément à la [RFC 1738](http://www.ietf.org/rfc/rfc1738.txt). Notez qu’au moment de la rédaction, cela ne modifie pas réellement la clé et le secret, mais cette étape doit tout de même être effectuée au cas où le format de ces valeurs évoluerait.
2. Concaténez la clé consommateur encodée, un caractère deux-points « : », et le secret consommateur encodé en une seule chaîne.
3. [Encodez en Base64](http://en.wikipedia.org/wiki/Base64) la chaîne obtenue à l’étape précédente.

Ci-dessous, des valeurs d’exemple illustrant le résultat de cet algorithme. Notez que le secret consommateur utilisé sur cette page est destiné à des tests et ne fonctionnera pas pour des requêtes réelles.

|     |     |
| :--- | :--- |
| Consumer key | xvz1evFS4wEEPTGEFPHBog |
| Consumer secret | L8qq9PZyRg6ieKGEKhZolGC0vJWLw8iEJ88DRdyOg |
| RFC 1738 encoded consumer<br /><br />key (does not change) | xvz1evFS4wEEPTGEFPHBog |
| RFC 1738 encoded consumer<br /><br />secret (does not change) | L8qq9PZyRg6ieKGEKhZolGC0vJWLw8iEJ88DRdyOg |
| Bearer Token credentials | xvz1evFS4wEEPTGEFPHBog:L8qq9PZyRg6ieKGEKhZolGC0vJWLw8iEJ88DRdyOg |
| Base64 encoded Bearer Token credentials | :: eHZ6MWV2RlM0d0VFUFRHRUZQSEJvZzpMOHFxOVBaeVJnNmllS0dFS2hab2xHQzB2SldMdzhpRUo4OERSZHlPZw== |

**Étape 2 : Obtenir un jeton d’accès « App only » (Bearer Token)**

La valeur calculée à l’étape 1 doit être échangée contre un jeton d’accès « App only » en émettant une requête vers [POST oauth2/token](/fr/resources/fundamentals/authentication/api-reference#post-oauth2-token) :

* La requête doit être une requête HTTP POST.
* La requête doit inclure un en-tête `Authorization` avec la valeur `Basic <base64 encoded value from step 1>.`
* La requête doit inclure un en-tête `Content-Type` avec la valeur `application/x-www-form-urlencoded;charset=UTF-8.`
* Le corps de la requête doit être `grant_type=client_credentials`.

**Exemple de requête (l’en-tête Authorization a été renvoyé à la ligne) :**

```json
POST /oauth2/token HTTP/1.1
Host: api.x.com
User-Agent: My X App v1.0.23
Authorization: Basic eHZ6MWV2RlM0d0VFUFRHRUZQSEJvZzpMOHFxOVBaeVJn
                     NmllS0dFS2hab2xHQzB2SldMdzhpRUo4OERSZHlPZw==
Content-Type: application/x-www-form-urlencoded;charset=UTF-8
Content-Length: 29
Accept-Encoding: gzip

grant\_type=client\_credentials
```

Si la requête est correctement formatée, le serveur répondra avec une charge utile encodée en JSON :

**Exemple de réponse :**

```json
HTTP/1.1 200 OK
Status: 200 OK
Content-Type: application/json; charset=utf-8
...
Content-Encoding: gzip
Content-Length: 140

{"token\_type":"bearer","access\_token":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAAAAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"}
```

Les applications doivent vérifier que la valeur associée à la clé `token_type` de l’objet renvoyé est `bearer`. La valeur associée à la clé `access_token` est le jeton d’accès « App only » (Bearer Token).

Notez qu’un seul jeton d’accès « App only » est valide pour une application à la fois. L’émission d’une autre requête avec les mêmes identifiants vers `/oauth2/token` renverra le même jeton jusqu’à son invalidation.

**Étape 3 : Authentifier les requêtes API avec le jeton d’accès « App only » (Bearer Token)**

Le jeton d’accès « App only » (Bearer Token) peut être utilisé pour émettre des requêtes vers des endpoints d’API qui prennent en charge l’authentification en mode application uniquement. Pour utiliser le jeton d’accès de l’application, construisez une requête HTTPS normale et incluez un en-tête `Authorization` avec la valeur `Bearer <base64 bearer token value from step 2>. Signing is not required.`

**Exemple de requête (l’en-tête Authorization a été renvoyé à la ligne) :**

```
GET /1.1/statuses/user\_timeline.json?count=100&screen\_name=twitterapi HTTP/1.1
Host: api.x.com
User-Agent: My X App v1.0.23
Authorization: Bearer AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAA
                      AAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
Accept-Encoding: gzip
```

**Invalidation d’un jeton d’accès en mode App only (Bearer token)**

Si un jeton d’accès en mode App only est compromis ou doit être invalidé pour quelque raison que ce soit, effectuez un appel vers [POST oauth2/invalidate_token](/fr/resources/fundamentals/authentication/api-reference#post-oauth2-invalidate-token).

**Exemple de requête (l’en-tête Authorization a été renvoyé à la ligne) :**

```bash
POST /oauth2/invalidate_token HTTP/1.1
Authorization: Basic eHZ6MWV2RlM0d0VFUFRHRUZQSEJvZzpMOHFxOVBaeVJn
                     NmllS0dFS2hab2xHQzB2SldMdzhpRUo4OERSZHlPZw==
User-Agent: My X App v1.0.23
Host: api.x.com
Accept: */*
Content-Length: 119
Content-Type: application/x-www-form-urlencoded

access_token=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAAAAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
```

**Exemple de réponse :**

```json
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
Content-Length: 127
...

{"access_token":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAAAAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"}
```

<div id="common-error-cases">
  #### Cas d’erreurs courants
</div>

Cette section décrit des erreurs fréquentes liées à la négociation et à l’utilisation des Bearer Tokens. Notez que toutes les réponses d’erreur possibles ne sont pas couvertes ici — soyez attentif aux codes et réponses d’erreur non gérés.

**Requêtes invalides pour obtenir ou révoquer un jeton d’accès « App only »**

Tentatives visant à :

* Obtenir un jeton d’accès « App only » (Bearer Token) avec une requête invalide (par exemple, en omettant `grant_type=client_credentials`).
* Obtenir ou révoquer un jeton d’accès « App only » (Bearer Token) avec des identifiants d’application incorrects ou expirés.
* Invalider un jeton d’accès « App only » (Bearer Token) incorrect ou déjà révoqué.
* Obtenir un jeton d’accès « App only » (Bearer Token) trop fréquemment sur une courte période.

Aboutissent à :

```json
HTTP/1.1 403 Forbidden
Content-Length: 105
Content-Type: application/json; charset=utf-8
...

{"errors":[{"code":99,"label":"authenticity_token_error","message":"Unable to verify your credentials"}]}
```

<div id="api-request-contains-invalid-app-only-access-token-bearer-token">
  #### La requête API contient un jeton d’accès « App-only » (Bearer) invalide
</div>

L’utilisation d’un jeton d’accès incorrect ou révoqué pour effectuer des requêtes à l’API entraînera :

```json
HTTP/1.1 401 Unauthorized
Content-Type: application/json; charset=utf-8
Content-Length: 61
...

{"errors":\[{"message":"Invalid or expired token","code":89}\]}
```

<div id="app-only-access-token-bearer-token-used-on-endpoint-which-doesnt-support-application-only-auth">
  #### Jeton d’accès applicatif uniquement (jeton Bearer) utilisé sur un endpoint qui ne prend pas en charge l’authentification applicative seule
</div>

Interroger un endpoint qui requiert un contexte utilisateur (tel que `statuses/home_timeline`) avec un jeton d’accès applicatif uniquement (jeton Bearer) produira :

```json
HTTP/1.1 403 Forbidden
Content-Type: application/json; charset=utf-8
Content-Length: 91
...

{"errors":[{"message":"Vos identifiants ne permettent pas d’accéder à cette ressource","code":220}]}
```