---
title: v1 vers v2 (Enterprise)
sidebarTitle: v1 vers v2 (Enterprise)
---

<div id="enterprise-compared-to-x-api-v2">
  ### Comparaison entre Enterprise et X API v2
</div>

**Similarités**

* Granularité
* Pagination
* Fuseau horaire

**Différences**

* URL des endpoints
* Exigences d’application et de projet
* Périodes disponibles
* Format des données de réponse
* Méthodes HTTP
* Formats temporels des requêtes
* Paramètres de requête
* Opérateurs de filtrage

<div id="similarities">
  #### Similarités
</div>

**Granularité**

Bien que le paramètre de sélection de la granularité des données renvoyées diffère (`bucket` pour la version Enterprise, `granularity` pour la version v2), les valeurs que vous pouvez transmettre à ce paramètre sont les mêmes, tout comme le comportement par défaut :

* `day`
* `hour` (par défaut)
* `minute`

**Pagination**

Bien que v2 propose des fonctionnalités de pagination supplémentaires (nouveaux paramètres de pagination permettant de naviguer à l’aide des IDs de publication avec `since_id` et `until_id`), les versions Enterprise et v2 permettent toutes deux de paginer dans le temps (`fromDate` et `toDate` avec Enterprise, et `start_time` et `end_time` pour v2).

Si vous utilisez la version Enterprise, vous utiliserez le paramètre `next` pour paginer ; le champ du jeton suivant s’appelle `next` et se trouve à la racine de la réponse.

Si vous utilisez v2, vous pouvez utiliser soit le paramètre `next_token`, soit `pagination_token` pour paginer, et le jeton suivant se trouve à `meta.next_token` dans la réponse.
 

**Fuseau horaire**

Comme indiqué dans la section Pagination, vous pouvez naviguer entre différentes pages de données en utilisant le temps, aussi bien avec Enterprise qu’avec v2. Dans les deux cas, vous utiliserez l’UTC comme fuseau horaire lors de l’utilisation de ces paramètres.

<div id="differences">
  #### Différences
</div>

**URL des endpoints**

* Endpoints Enterprise :
  * 30 jours - `http://gnip-api.x.com/search/30day/accounts/:account_name/:label/counts.json`
  * Archives complètes - `http://gnip-api.x.com/search/fullarchive/accounts/:account_name/:label/counts.json`
* Endpoints X API v2
  * Récent (7 jours) - `https://api.x.com/2/tweets/counts/recent`
  * Archives complètes - `https://api.x.com/2/tweets/counts/all`

**Exigences pour l’App et le Project**

Les endpoints X API v2 exigent l’utilisation d’identifiants provenant d’une [developer App](/fr/resources/fundamentals/developer-apps) associée à un [Project](/fr/resources/fundamentals/developer-apps) lors de l’authentification de vos requêtes. Tous les endpoints X API v1.1 peuvent utiliser des identifiants provenant d’Apps autonomes ou d’Apps associées à un Project.
 

**Périodes disponibles**

L’API Enterprise et X API v2 proposent toutes deux des endpoints qui vous permettent de récupérer les données de volume de publications pour l’intégralité des archives.

Cependant, X API v2 ne propose pas d’endpoint pour une période de 30 jours comme le fait l’API Enterprise. À la place, elle propose les archives complètes susmentionnées, ou une période de 7 jours, alignées sur les [endpoints v2 Search Posts](/fr/x-api/posts/search/introduction).
 

**Format des données de réponse**

Il existe quelques différences mineures dans le format des données que vous recevrez via Enterprise et X API v2 :

* Les données de comptage d’Enterprise se trouvent dans un objet `results`, tandis que les données de comptage v2 se trouvent dans un objet `data`.
* Les champs de comptage d’Enterprise s’appellent `timePeriod` (heure de début) et `count`, tandis que v2 scinde la période en champs `start` et `end` (qui utilisent un format date/heure différent de celui d’Enterprise, expliqué dans les formats temporels de requête) et renomme le champ de comptage en `tweet_count`.
* Les métadonnées Enterprise incluent `totalCount`, `next` et l’objet `requestParameters` au niveau racine. En revanche, v2 n’inclut pas l’objet `requestParameters` et déplace/renomme les éléments suivants dans un objet `meta` au niveau racine : `total_tweet_count` et `next_token`.
   

**Méthodes HTTP**

La version Enterprise de l’API vous permet d’envoyer la requête soit via la méthode HTTP POST avec un corps JSON, soit via la méthode HTTP GET avec une chaîne de requête.

V2 permet uniquement d’utiliser la méthode HTTP GET avec une chaîne de requête.
 

**Formats temporels de requête**

La version Enterprise de cet endpoint utilise le format date/heure suivant, à la fois dans les paramètres de pagination et dans le champ de réponse `timePeriod` : `YYYYMMDDHHmm`

L’endpoint v2 utilise le format date/heure ISO 8601/RFC 3339, à la fois dans les paramètres de pagination et dans les champs de réponse `start` et `end` : `YYYY-MM-DDTHH:mm:ssZ`

**Paramètres de requête**

Voici un tableau des paramètres de requête pour Enterprise et X API v2 :

| Enterprise | Search Posts v2 |
| :--- | :--- |
| query | query |
| bucket | granularity |
| fromDate (YYMMDDHHmm) | start_time (YYYY-MM-DDTHH:mm:ssZ) |
| toDate (YYMMDDHHmm) | end_time (YYYY-MM-DDTHH:mm:ssZ) |
|     | since_id |
|     | until_id |
| next | next_token and pagination_token |

**Opérateurs de filtrage**

Bien que les opérateurs d’Enterprise et de X API v2 soient en grande partie identiques, il existe des différences de disponibilité ainsi que de nouveaux opérateurs introduits uniquement dans X API v2.

Pour consulter un tableau complet des opérateurs disponibles pour X API v2, Enterprise et même Premium, veuillez visiter la [page de migration Post counts](/fr/x-api/posts/counts/migrate/overview).

<div id="api-reference-index">
  ## Index de référence de l’API
</div>

Pour consulter la référence complète de l’API, veuillez sélectionner un point de terminaison ci-dessous.

<div id="recent-post-counts">
  ### Comptages de posts récents
</div>

|     |     |
| :--- | :--- |
| **Obtenez le nombre de posts correspondant à une requête au cours des 7 derniers jours** | `[GET /2/tweets/counts/recent](/x-api/posts/tweet-counts#api-reference-index/get-tweets-counts-recent)` |

<div id="full-archive-post-counts">
  ### Comptages de publications sur l’ensemble de l’archive
</div>

Uniquement disponible pour les personnes disposant de l’[accès Pro et Enterprise](/fr/x-api/getting-started/about-x-api)

|     |     |
| :--- | :--- |
| **Obtenir le nombre de publications correspondant à une requête** | `[GET /2/tweets/counts/all](/x-api/posts/tweet-counts#api-reference-index/get-tweets-counts-all)` |