---
title: v1 à v2 (Enterprise)
sidebarTitle: v1 à v2 (Enterprise)
---

<div id="enterprise-compared-to-x-api-v2">
  ### Comparaison entre Enterprise et X API v2
</div>

**Similarités**

* Pagination
* Fuseau horaire
* Prise en charge de l’historique d’édition des posts et des métadonnées.

**Différences**

* URL des endpoints
* Exigences d’application et de projet
* Périodes disponibles
* Format des données de réponse
* Méthodes HTTP
* Formats horaires des requêtes
* Paramètres de requête
* Opérateurs de filtrage

<div id="similarities">
  #### Similarités
</div>

**Pagination**

Bien que v2 propose des fonctionnalités de pagination supplémentaires (nouveaux paramètres permettant de naviguer à l&#39;aide d&#39;ID de Post avec `since_id` et `until_id`), l&#39;offre Enterprise comme v2 permettent toutes deux de paginer par période (`fromDate` et `toDate` avec Enterprise, et `start_time` et `end_time` pour v2).
 

**Fuseau horaire**

Comme indiqué dans la section sur la pagination, vous pouvez parcourir différentes pages de données en utilisant des bornes temporelles, tant pour Enterprise que pour v2. Dans les deux cas, vous utiliserez l’UTC comme fuseau horaire avec ces paramètres.

**Prise en charge de l’historique d’édition des Posts et des métadonnées**

Les deux versions fournissent des métadonnées décrivant tout historique d’édition. Consultez les [références de l’API de recherche](/fr/x-api/posts/recent-search) et la [page Principes de l’édition des Posts](/fr/x-api/fundamentals/edit-posts) pour plus de détails. 

<div id="differences">
  #### Différences
</div>

**URL des endpoints**

* Endpoints Enterprise :
  * 30 jours - `http://gnip-api.x.com/search/30day/accounts/:account_name/:label.json`
  * Archive complète - `http://gnip-api.x.com/search/fullarchive/accounts/:account_name/:label.json`
* Endpoints X API v2
  * Récent (7 jours) - `https://api.x.com/2/tweets/search/recent`
  * Archive complète - `https://api.x.com/2/tweets/search/all`

**Exigences relatives aux Apps et Projects**

Les endpoints X API v2 exigent d’utiliser des identifiants issus d’un Project lors de l’authentification de vos requêtes. Tous les endpoints X API v1.1 peuvent utiliser des identifiants provenant d’Apps autonomes ou d’Apps associées à un Project.
 

**Périodes disponibles**

L’API Enterprise et X API v2 proposent toutes deux des endpoints qui vous permettent de récupérer des données de Posts filtrées pour l’archive complète des Posts.

Cependant, X API v2 ne propose pas d’endpoint pour une période de 30 jours comme le fait l’API Enterprise. À la place, elle propose l’archive complète mentionnée ci-dessus, ou une période de 7 jours, qui s’alignent avec Native Enriched vers v2 et [Activity Streams vers v2](/fr/x-api/migrate/data-format-migration#migrating-from-activity-streams-data-format-to-v2), ce qui peut vous aider à faire correspondre les champs Enterprise aux nouveaux champs v2. Ce guide vous fournira également l’expansion et le paramètre de champ spécifiques que vous devrez transmettre avec votre requête v2 pour renvoyer des champs donnés.
 

**Format des données de réponse**

L’une des principales différences entre le [format de réponse Enterprise](https://developer.x.com/x-api/enterprise-gnip-2.0/fundamentals/data-dictionary) et le [format de X API v2](/fr/x-api/fundamentals/data-dictionary) est la manière de sélectionner les champs renvoyés dans la charge utile.

Pour l’Enterprise Search API, vous recevez de nombreux champs de réponse par défaut, puis vous avez la possibilité d’utiliser des paramètres pour indiquer quels champs ou ensembles de champs doivent être renvoyés dans la charge utile.

La version X API v2 ne renvoie par défaut que les champs `id` et `text` du Post. Pour demander des champs ou objets supplémentaires, vous devez utiliser les paramètres [fields](/fr/x-api/fundamentals/fields) et [expansions](/fr/x-api/fundamentals/expansions). Tous les champs de Post que vous demandez via ces endpoints seront renvoyés dans l’objet Post principal. Tous les objets et champs étendus user, media, poll ou place seront renvoyés dans un objet `includes` au sein de votre réponse. Vous pouvez ensuite faire correspondre tout objet étendu à l’objet Post en faisant correspondre les ID présents à la fois dans le Post et dans l’objet étendu.

Nous vous encourageons à en savoir plus sur ces nouveaux paramètres dans leurs guides respectifs, ou en lisant notre guide sur [l’utilisation de fields et expansions](/fr/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions).

En plus des changements dans la manière de demander certains champs, X API v2 introduit également de nouvelles structures JSON pour les objets renvoyés par les API, y compris les objets [Post](/fr/x-api/fundamentals/data-dictionary#tweet) et [user](/fr/x-api/fundamentals/data-dictionary#user).

* Au niveau racine JSON, les endpoints standards renvoient des objets Post dans un tableau `statuses`, tandis que X API v2 renvoie un tableau `data`.
* Au lieu de se référer à des « statuses » Retweeted et Quoted, le JSON de X API v2 se réfère à des Tweets Retweeted et Quoted. De nombreux champs historiques et obsolètes, tels que `contributors` et `user.translator_type`, sont supprimés.
* Au lieu d’utiliser à la fois `favorites` (dans l’objet Post) et `favourites` (dans l’objet user), X API v2 utilise le terme like.
* X adopte la convention selon laquelle les valeurs JSON sans valeur (par exemple `null`) ne sont pas écrites dans la charge utile. Les attributs Post et user ne sont inclus que s’ils ont des valeurs non nulles.
   

Nous avons également introduit un nouvel ensemble de champs dans l’objet Post, notamment :

* Un champ [conversation_id](/fr/x-api/fundamentals/conversation-id)
* Deux nouveaux champs [annotations](/fr/x-api/fundamentals/post-annotations), incluant context et entities
* Plusieurs nouveaux champs [metrics](/fr/x-api/fundamentals/metrics)
* Un nouveau champ `reply_setting`, qui indique qui peut répondre à un Post donné

Et une dernière remarque. La réponse premium inclut un objet `requestParameters` au niveau racine, qui contient les paramètres inclus dans votre requête. La version v2 contient à la place un objet `meta` au niveau racine, qui inclut `newest_id`, `oldest_id`, `result_count` et `next_token` s’il existe une page de résultats supplémentaire.

**Méthodes HTTP**

La version Enterprise de l’API vous permet d’envoyer la requête soit avec la méthode HTTP POST et un corps JSON, soit avec la méthode HTTP GET et une chaîne de requête.

La v2 permet uniquement d’utiliser la méthode HTTP GET avec une chaîne de requête.
 

**Formats de temps de la requête**

La version Enterprise de cet endpoint utilise le format date/heure suivant, à la fois dans les paramètres de pagination et dans le champ de réponse `timePeriod` : `YYYYMMDDHHmm`

L’endpoint v2 utilise le format date/heure ISO 8601/RFC 3339, à la fois dans les paramètres de pagination et dans les champs de réponse `start` et `end` : `YYYY-MM-DDTHH:mm:ssZ
 `

**Paramètres de requête**

Vous trouverez ci-dessous un tableau des paramètres de requête pour Enterprise et X API v2 :

| Enterprise | Search Posts v2 |
| :--- | :--- |
| query | query |
| maxResults | max_results |
| fromDate (YYMMDDHHmm) | start_time (YYYY-MM-DDTHH:mm:ssZ) |
| toDate (YYMMDDHHmm) | end_time (YYYY-MM-DDTHH:mm:ssZ) |
|     | since_id |
|     | until_id |
| next | next_token or pagination_token |

**Opérateurs de filtrage**

Bien que les opérateurs d’Enterprise et de X API v2 soient en grande partie les mêmes, il existe des différences de disponibilité et de nouveaux opérateurs introduits uniquement dans X API v2.

Pour consulter le tableau complet des opérateurs disponibles pour X API v2, Enterprise, ainsi que pour les offres Premium et Standard, veuillez visiter la [page de migration Search Posts](/fr/x-api/posts/search/migrate/overview).

**Étapes suivantes**

[Consultez notre guide de démarrage rapide pour la recherche dans l’archive complète avec X API v2](/fr/x-api/posts/search/quickstart/full-archive-search)

[Consultez la référence de l’API pour la recherche dans l’archive complète](/fr/x-api/posts/full-archive-search)

[Découvrez des exemples de code pour ces endpoints](https://github.com/xdevplatform/Twitter-API-v2-sample-code)