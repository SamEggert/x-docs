---
title: Recherche des comptes masqués
sidebarTitle: Recherche des comptes masqués
---

import { Button } from '/snippets/fr/button.mdx';

<div id="getting-started-with-the-mutes-lookup-endpoint">
  ## Bien démarrer avec l’endpoint de recherche des comptes mis en sourdine
</div>

Ce guide de démarrage rapide vous aidera à effectuer votre première requête vers l’endpoint de recherche des comptes mis en sourdine à l’aide de Postman.

Veuillez consulter notre dépôt GitHub [X API v2 sample code](https://github.com/xdevplatform/Twitter-API-v2-sample-code) si vous souhaitez voir des exemples de code dans différents langages.

<Note>
  **Prérequis**

  Pour suivre ce guide, vous devez disposer d’un ensemble de [keys and tokens](/fr/resources/fundamentals/authentication) pour authentifier votre requête. Vous pouvez générer ces keys and tokens en suivant ces étapes :

  * [Inscrivez-vous pour obtenir un compte développeur](https://developer.x.com/en/apply-for-access) et obtenez l’approbation.
  * Créez un [Project](/fr/resources/fundamentals/projects) et une [developer App](/fr/resources/fundamentals/developer-apps) associée dans le portail développeur.
  * Accédez à la page « Keys and tokens » de votre App pour générer les identifiants requis. Veillez à enregistrer tous les identifiants dans un endroit sécurisé.
</Note>

<div id="steps-to-build-a-mutes-lookup-request">
  ### Étapes pour créer une requête de recherche des comptes mis en sourdine
</div>

<div id="step-one-start-with-a-tool-or-library">
  #### Première étape : commencer avec un outil ou une bibliothèque
</div>

Il existe plusieurs outils, exemples de code et bibliothèques que vous pouvez utiliser pour envoyer une requête à cet endpoint, mais nous utiliserons ici l’outil Postman pour simplifier le processus.

Pour importer la collection Postman de X API v2 dans votre environnement, veuillez cliquer sur le bouton suivant :

<Button href="https://app.getpostman.com/run-collection/9956214-784efcda-ed4c-4491-a4c0-a26470a67400">
  Ajouter X API v2 à Postman
</Button>

Une fois la collection X API v2 importée dans Postman, accédez au dossier « Mutes » et sélectionnez « Mutes lookup ».
 

<div id="step-two-authenticate-your-request">
  #### Deuxième étape : authentifier votre requête
</div>

Pour effectuer correctement une requête vers l’API X, vous devez vérifier que vous disposez des autorisations nécessaires. Pour ce faire avec ce point de terminaison, vous devez authentifier votre requête en utilisant soit [OAuth 1.0a User Context](/fr/resources/fundamentals/authentication), soit [OAuth 2.0 Authorization Code with PKCE](fr/resources/fundamentals/authentication#oauth-2-0-authorization-code-flow-with-pkce-2).

Dans cet exemple, nous allons utiliser OAuth 1.0a User Context.

Vous devez ajouter vos clés et jetons — en particulier votre API Key, API Secret Key, OAuth 1.0a user Access Token et OAuth 1.0a user Access Token Secret — dans Postman. Pour ce faire, sélectionnez l’environnement nommé « X API v2 » dans l’angle supérieur droit de Postman, puis ajoutez vos clés et jetons dans les champs « initial value » et « current value » (en cliquant sur l’icône en forme d’œil à côté du menu déroulant de l’environnement).

Ces variables seront automatiquement reprises dans l’onglet Authorization de la requête si vous avez effectué cette opération correctement.
 

<div id="step-three-specify-a-user">
  #### Étape trois : spécifier un utilisateur
</div>

Avec cet endpoint, vous devez indiquer votre ID utilisateur ou l’ID d’un utilisateur authentifié pour voir quelles personnes vous avez mises en sourdine, vous ou l’utilisateur authentifié.

Dans Postman, allez à l’onglet « Params » et saisissez l’ID de l’utilisateur authentifié dans la colonne « Value » de id sous « Path Variables » (en bas de la section), en veillant à ne pas inclure d’espaces avant ou après l’ID.

Au-dessus de la section « Path Variables », vous verrez qu’il existe des « Query Params » facultatifs à ajouter. Pour cet exemple, cochez la variable max_results et indiquez une valeur de 5.

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Parameter Type** |
| `id` | (votre ID utilisateur) | Path |
| max_results | 5   | Query |

<div id="step-four-identify-and-specify-which-fields-you-would-like-to-retrieve">
  #### Étape quatre : identifier et préciser les champs que vous souhaitez récupérer
</div>

Si vous cliquez sur le bouton « Send » après l’étape trois, vous recevrez dans votre réponse les champs par défaut de l’[objet user](/fr/x-api/fundamentals/data-dictionary#user) : id, name et username.

Si vous souhaitez recevoir des champs supplémentaires au-delà de id, name et username, vous devez spécifier ces champs dans votre requête à l’aide des paramètres [fields](/fr/x-api/fundamentals/fields) et/ou [expansions](/fr/x-api/fundamentals/expansions).

Pour cet exercice, nous allons demander trois ensembles supplémentaires de champs provenant d’objets différents :

1. Le champ supplémentaire user.created_at dans les objets utilisateur principaux.
2. Les champs par défaut de l’objet des Posts épinglés associés pour les utilisateurs renvoyés : id et text.
3. Le champ supplémentaire tweet.created_at dans les objets Post associés.

Dans Postman, accédez à l’onglet « Params » et ajoutez la paire clé:valeur suivante au tableau « Query Params » :

|     |     |     |
| :--- | :--- | :--- |
| **Key** | **Value** | **Returned fields** |
| user.fields | created_at | user.created_at |
| expansions | pinned_tweet_id | tweet.id, tweet.text |
| tweet.fields | created_at | includes.tweets.created_at |

Vous devriez maintenant voir, à côté du bouton « Send », une URL similaire avec votre propre ID utilisateur à la place de l’ID d’exemple :

`https://api.x.com/2/users/1324848235714736129/muting?user.fields=created_at&expansions=pinned_tweet_id&tweet.fields=created_at&max_results=5`

<div id="step-five-make-your-request-and-review-your-response">
  #### Cinquième étape : envoyez votre requête et examinez la réponse
</div>

Une fois tout configuré, cliquez sur le bouton « Send ». Vous recevrez une réponse similaire à l’exemple ci-dessous :

```
{
  "data": [
    {
      "username": "TwitterDev",
      "created_at": "2013-12-14T04:35:55.000Z",
      "id": "2244994945",
      "name": "Twitter Dev",
      "pinned_tweet_id": "1430984356139470849"
    }
  ],
  "includes": {
    "tweets": [
      {
        "created_at": "2021-08-26T20:03:51.000Z",
        "id": "1430984356139470849",
        "text": "Help us build a better Twitter Developer Platform!\n \nTake the annual developer survey &gt;&gt;&gt; https://t.co/9yTbEKlJHH https://t.co/fYIwKPzqua"
      }
    ]
  },
  "meta": {
    "result_count": 1
  }
}
```

<div id="step-six-paginate-through-your-results">
  #### Sixième étape : parcourir vos résultats
</div>

Vous remarquerez qu’un objet meta se trouve au bas de la réponse. Si vous avez reçu un next_token, cela indique qu’une autre page de résultats est disponible. Pour récupérer la page suivante, prenez la valeur du champ next_token et ajoutez-la à la requête comme valeur d’un paramètre de requête supplémentaire nommé pagination_token.
 

|     |     |
| :--- | :--- |
| **Clé** | **Valeur** |
| pagination_token | 1710819323648428707 |

Si vous envoyez la requête après avoir ajouté ce paramètre, les cinq résultats suivants seront renvoyés avec la charge utile suivante, puisque nous avons défini max_results sur 5 à l’étape trois. Vous pouvez répéter ce processus jusqu’à ce que tous les résultats aient été renvoyés, mais vous pouvez aussi utiliser le paramètre max_results pour demander jusqu’à 1000 utilisateurs par requête, afin de réduire la pagination nécessaire.