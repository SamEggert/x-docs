---
title: Guide de migration
sidebarTitle: Guide de migration
---

import { Button } from '/snippets/fr/button.mdx';

<div id="blocks-lookup-standard-v11-compared-to-x-api-v2">
  ### Recherche des blocages : Standard v1.1 comparé à X API v2
</div>

Si vous avez travaillé avec les endpoints standard v1.1 [GET blocks/ids](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/mute-block-report-users/api-reference/get-blocks-ids) et [GET blocks/list](https://developer.x.com/en/docs/twitter-api/v1/accounts-and-users/mute-block-report-users/api-reference/get-blocks-list), ce guide a pour objectif de vous aider à comprendre les similitudes et les différences entre les endpoints de recherche des blocages du standard v1.1 et de X API v2.

* **Similarités**
  * Authentification
* **Différences**
  * URL des endpoints

  * Limites d’utilisateurs par requête

  * Exigences pour l’application et le projet

  * Formats des données de réponse

  * Paramètres de requête

<div id="similarities">
  #### Similarités
</div>

**Authentification**

Les endpoints de recherche des blocages, tant pour la version standard v1.1 que pour X API v2, utilisent [OAuth 1.0a en contexte utilisateur](/fr/resources/fundamentals/authentication#oauth-1-0a-2). Par conséquent, si vous utilisiez auparavant l’un des endpoints de recherche des blocages de la version standard v1.1, vous pouvez continuer à utiliser la même méthode d’authentification lors de la migration vers X API v2. 

<div id="differences">
  #### Différences
</div>

**URLs des endpoints**

* Endpoints standard v1.1 :
  * GET https://api.x.com/1.1/blocks/ids.json
    (liste des ID des utilisateurs bloqués par l’utilisateur spécifié)
  * GET https://api.x.com/1.1/blocks/lists.json
    (liste des utilisateurs bloqués par l’utilisateur spécifié)
* Endpoint X API v2 :
  * GET https://api.x.com/2/users/:id/blocking
    (liste des utilisateurs bloqués par l’ID d’utilisateur spécifié)
     

**Limites d’utilisateurs par requête**

Les endpoints standard v1.1 vous permettent de récupérer jusqu’à 5000 utilisateurs par requête. Les nouveaux endpoints v2 vous permettent de récupérer jusqu’à 1000 utilisateurs par requête. Pour obtenir 1000 utilisateurs, vous devez passer max&#95;results=1000 en paramètre de requête ; vous pouvez ensuite passer le next&#95;token renvoyé dans la charge utile de réponse au paramètre de requête pagination&#95;token dans votre requête suivante.
 

**Exigences pour l’App et le Project**

Les endpoints X API v2 exigent l’utilisation d’identifiants provenant d’une [developer App](/fr/resources/fundamentals/developer-apps) associée à un [Project](/fr/resources/fundamentals/developer-apps) lors de l’authentification de vos requêtes. Tous les endpoints X API v1.1 peuvent utiliser des identifiants provenant d’Apps autonomes ou d’Apps associées à un Project.

**Format des données de réponse**

L’une des plus grandes différences entre les versions des endpoints standard v1.1 et X API v2 est la façon dont vous sélectionnez les champs renvoyés dans votre charge utile.

Pour les endpoints standard, vous recevez de nombreux champs de réponse par défaut, puis vous avez la possibilité d’utiliser des paramètres pour identifier quels champs ou ensembles de champs doivent être renvoyés dans la charge utile.

La version X API v2 ne fournit par défaut que les champs user id, name et username. Pour demander des champs ou objets supplémentaires, vous devrez utiliser les paramètres [fields](/fr/x-api/fundamentals/fields) et [expansions](/fr/x-api/fundamentals/expansions). Tous les champs utilisateur que vous demandez depuis cet endpoint seront renvoyés dans l’objet utilisateur principal. Tout objet Post étendu et ses champs seront renvoyés dans un objet includes au sein de votre réponse. Vous pouvez ensuite faire correspondre les objets étendus à l’objet utilisateur en faisant correspondre les ID présents à la fois dans l’utilisateur et dans l’objet Post étendu. 

Nous vous encourageons à en savoir plus sur ces nouveaux paramètres dans leurs guides respectifs, ou en lisant notre guide sur [comment utiliser fields et expansions](/fr/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions). 

Nous avons également élaboré un [guide de migration du format des données](/fr/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) qui peut vous aider à faire correspondre les champs standard v1.1 aux nouveaux champs v2. Ce guide vous indiquera également le paramètre d’expansion et de champ spécifique que vous devrez passer avec votre requête v2 pour renvoyer des champs spécifiques. 
 

En plus des changements dans la manière de demander certains champs, X API v2 introduit également de nouvelles structures JSON pour les objets renvoyés par les API, y compris les objets [P](/fr/x-api/fundamentals/data-dictionary#tweet)ost et [user](/fr/x-api/fundamentals/data-dictionary#user).

* Au niveau racine JSON, les endpoints standard renvoient des objets Post dans un tableau statuses, tandis que X API v2 renvoie un tableau data. 
* Au lieu de faire référence aux « statuses » Retweeted et Quoted, le JSON de X API v2 fait référence aux Tweets Retweeted et Quoted. De nombreux champs hérités et obsolètes, tels que contributors et user.translator&#95;type, sont supprimés. 
* Au lieu d’utiliser à la fois favorites (dans l’objet Post) et favourites (dans l’objet user), X API v2 utilise le terme like. 
* X adopte la convention selon laquelle les valeurs JSON sans valeur (par exemple, null) ne sont pas écrites dans la charge utile. Les attributs Post et user ne sont inclus que s’ils ont des valeurs non nulles. 
   

Nous avons également introduit un nouvel ensemble de champs dans l’[objet Post](/fr/x-api/fundamentals/data-dictionary#tweet), notamment les suivants :

* Un champ [conversation&#95;id](/fr/x-api/fundamentals/conversation-id)
* Deux nouveaux champs [annotations](/fr/x-api/fundamentals/post-annotations), notamment context et entities
* Plusieurs nouveaux champs [metrics](/fr/x-api/fundamentals/metrics) 
* Un nouveau champ reply&#95;setting, qui indique qui peut répondre à un Post donné

**Paramètres de requête**

Les paramètres de requête standard v1.1 suivants acceptaient deux paramètres (user&#95;id ou screen&#95;name). L’API X v2 n’accepte que l’identifiant utilisateur numérique, qui doit être fourni dans le chemin de l’endpoint.