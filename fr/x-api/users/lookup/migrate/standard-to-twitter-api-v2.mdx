---
title: v1 vers v2
sidebarTitle: v1 vers v2
---

import { Button } from '/snippets/fr/button.mdx';

<div id="standard-v11-compared-to-x-api-v2">
  ### Standard v1.1 comparé à l’API X v2
</div>

Si vous avez travaillé avec les endpoints standard v1.1 GET users/show et GET users/lookup, ce guide vise à vous aider à comprendre les similitudes et les différences entre les endpoints de recherche d’utilisateurs des versions standard et API X v2.

* **Similitudes**
  * Contexte utilisateur OAuth 1.0a
  * Limites d’utilisateurs par requête
* **Différences**
  * URL des endpoints
  * Exigences pour l’application et le projet
  * Format des données de réponse
  * Paramètres de requête

<div id="similarities">
  #### Similarités
</div>

**Méthode d’authentification OAuth 1.0a en contexte utilisateur**

Le point de terminaison standard prend en charge [OAuth 1.0a User Context](/fr/resources/fundamentals/authentication#oauth-1-0a-2), tandis que les points de terminaison de recherche d’utilisateurs de la nouvelle X API v2 prennent en charge à la fois OAuth 1.0a User Context et l’[authentification App only](/fr/resources/fundamentals/authentication#oauth-2-0). Par conséquent, si vous utilisiez auparavant l’un des points de terminaison standard v1.1 de recherche d’utilisateurs, vous pouvez continuer à utiliser la même méthode d’authentification en migrant vers la version X API v2. 

Selon la bibliothèque/le package d’authentification que vous utilisez, l’authentification App only est probablement la façon la plus simple de démarrer et peut être configurée avec un simple en-tête de requête. Pour savoir comment générer un jeton d’accès App only, consultez [ce guide App only](/fr/resources/fundamentals/authentication#bearer-token-also-known-as-app-only). 

**Limites d’utilisateurs par requête**

Le point de terminaison standard v1.1 GET users/lookup vous permet d’indiquer jusqu’à 100 utilisateurs par requête. Il en va de même pour les points de terminaison GET /users et GET /users/by. Pour en spécifier 100, vous devez transmettre le paramètre ids (GET /users) ou le paramètre username (GET /users/by) dans la chaîne de requête et fournir la liste des IDs/noms d’utilisateur sous forme de liste séparée par des virgules. 
 

<div id="differences">
  #### Différences
</div>

**URLs d’endpoint**

* Endpoints standard v1.1 :
  * https://api.x.com/1.1/users/show (recherche par ID unique ou nom d’utilisateur)
  * https://api.x.com/1.1/users/lookup (recherche par plusieurs ID ou noms d’utilisateur)
* Endpoint X API v2 :
  * https://api.x.com/2/users (recherche par plusieurs ID)
  * https://api.x.com/2/users/:id (recherche par ID unique)
  * https://api.x.com/2/users/by (recherche par plusieurs noms d’utilisateur)
  * https://api.x.com/2/users/by/username/:username (recherche par nom d’utilisateur unique)

**Exigences pour les Apps et les Projets**

Les endpoints X API v2 exigent d’utiliser des identifiants issus d’une [developer App](/fr/resources/fundamentals/developer-apps) associée à un [Project](/fr/resources/fundamentals/projects) lors de l’authentification de vos requêtes. Tous les endpoints X API v1.1 peuvent utiliser des identifiants d’Apps autonomes ou d’Apps associées à un projet.

**Format des données de réponse**

L’une des plus grandes différences entre les versions standard v1.1 et X API v2 tient à la manière dont vous sélectionnez les champs renvoyés dans votre charge utile.

Pour les endpoints standard, de nombreux champs de réponse sont renvoyés par défaut, avec ensuite la possibilité d’utiliser des paramètres pour préciser quels champs ou ensembles de champs doivent être inclus dans la charge utile.

La version X API v2 ne renvoie par défaut que les champs user id, name et username. Pour demander des champs ou objets supplémentaires, vous devrez utiliser les paramètres [fields](/fr/x-api/fundamentals/fields) et [expansions](/fr/x-api/fundamentals/expansions). Tous les champs user demandés depuis cet endpoint seront renvoyés dans l’objet user principal. Tout objet Post « étendu » et ses champs seront renvoyés dans un objet includes au sein de votre réponse. Vous pouvez ensuite faire correspondre tout objet étendu à l’objet user en faisant correspondre les ID présents à la fois dans l’objet user et dans l’objet Post étendu.

Nous vous encourageons à en savoir plus sur ces nouveaux paramètres dans leurs guides respectifs, ou en lisant notre guide sur [how to use fields and expansions](/fr/x-api/fundamentals/data-dictionary#how-to-use-fields-and-expansions).

Nous avons également élaboré un [data format migration guide](/fr/x-api/migrate/data-format-migration#migrating-from-standard-v1-1s-data-format-to-v2) qui peut vous aider à faire correspondre les champs standard v1.1 aux nouveaux champs v2. Ce guide vous indiquera aussi les paramètres d’expansion et de champ spécifiques à transmettre avec votre requête v2 pour renvoyer des champs précis.

En plus des changements concernant la manière de demander certains champs, X API v2 introduit également de nouvelles conceptions JSON pour les objets renvoyés par les API, y compris les objets [Post](/fr/x-api/fundamentals/data-dictionary#tweet) et [user](/fr/x-api/fundamentals/data-dictionary#user).

* Au niveau racine du JSON, les endpoints standard renvoient des objets Post dans un tableau statuses, tandis que X API v2 renvoie un tableau data.
* Au lieu de faire référence à des « statuses » Retweeted et Quoted, le JSON de X API v2 fait référence à des Tweets Retweeted et Quoted. De nombreux champs hérités et obsolètes, tels que contributors et user.translator_type, sont supprimés.
* Au lieu d’utiliser à la fois favorites (dans l’objet Post) et favourites (dans l’objet user), X API v2 utilise le terme like.
* X adopte la convention selon laquelle les valeurs JSON sans valeur (par exemple null) ne sont pas écrites dans la charge utile. Les attributs Post et user ne sont inclus que s’ils ont des valeurs non nulles.

Nous avons également introduit un nouvel ensemble de champs dans l’[objet Post](/fr/x-api/fundamentals/data-dictionary#tweet), notamment :

* Un champ [conversation_id](/fr/x-api/fundamentals/conversation-id)
* Deux nouveaux champs [annotations](/fr/x-api/fundamentals/post-annotations), dont context et entities
* Plusieurs nouveaux champs [metrics](/fr/x-api/fundamentals/metrics)
* Un nouveau champ reply_setting, qui indique qui peut répondre à un Post donné

**Paramètres de requête**

Les paramètres de requête standard v1.1 suivants ont des équivalents dans X API v2 :

|     |     |
| :--- | :--- |
| **Standard** | **X API v2** |
| user_id | ids |
| screen_name | username |

Il existe également un ensemble de paramètres de requête standard pour la recherche d’utilisateurs qui ne sont **pas** pris en charge dans X API v2 :

| Standard | Commentaire |
| :--- | :--- |
| include_entities | Ce paramètre sert à supprimer le nœud entities du payload du Post. Il a été remplacé par les champs additifs et la fonctionnalité d’expansions. |