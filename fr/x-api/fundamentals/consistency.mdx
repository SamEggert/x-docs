---
title: Cohérence
---

## Cohérence entre les endpoints de l&#39;API X v2

L’un des principaux aspects de la nouvelle version v2 de l’API X est la cohérence entre les endpoints. Cela signifie que les objets renvoyés, les fonctionnalités et les comportements de l’API sont uniformes sur des endpoints similaires.

Vous pouvez vous attendre à ce que les éléments suivants soient identiques sur tous les endpoints :

<div id="path-naming">
  ### Nommage des chemins
</div>

Le nommage des chemins inclut toujours la [version](/fr/x-api/fundamentals/versioning) de l’endpoint, suivie de la **ressource**. Ensuite, le chemin peut contenir un **ID** lié à la ressource précédente, un **verbe de sélection** qui aide à déterminer quelles données renvoyer (par exemple `search` ou `sample`), un **verbe de diffusion** qui aide à déterminer comment les données sont délivrées (par exemple `stream`), ou d’autres ressources ayant une **relation** avec la ressource principale (par exemple `/user/12/tweets`). Enfin, vous pouvez ajouter un **paramètre de requête** à la fin si l’endpoint accepte des paramètres de requête.

Voici quelques exemples de la façon dont ces éléments de chemin et de requête peuvent être organisés :

`/version/resource/id?param1=value&param2=value /version/resource/delivery/selection?param1=value&param2=value`

Exemples de requêtes réelles :

`/2/tweets/1067094924124872705?expansions=attachments.media_keys&tweet.fields=author_id /2/users/2244994945?user.fields=created_at,description /2/tweets/search/stream /2/tweets/search/recent?query=snow`

<div id="json-schema">
  ### JSON Schema
</div>

Les réponses aux requêtes sont définies à l’aide de [JSON Schema](http://json-schema.org/). Cela signifie que les requêtes renvoient systématiquement des ensembles d’objets sous forme de tableaux, chaque élément comportant un identifiant. Les requêtes ne renvoient pas de mappes avec des identifiants comme clés.

<div id="response-object-and-parameters">
  ### Objet de réponse et paramètres
</div>

L’objet renvoyé par défaut est identique pour chaque endpoint de ce type d’objet :

* Les `id` sont toujours des chaînes de caractères.
* Les paramètres et les champs de réponse utilisent systématiquement l’orthographe américaine.
* Les champs sont vides ou non renvoyés s’il n’y a aucune valeur.
* L’objet `entities` ne contient que les entités extraites du texte du Post : `urls`, `hashtags`, `mentions` et `cashtags`.
* Toutes les informations liées aux cards, y compris les champs `media_keys` et `poll_ids`, sont renvoyées dans l’objet `attachments`.

Voici un exemple d’objet de réponse depuis l’endpoint [single Post lookup](/fr/x-api/posts/post-lookup-by-post-id) (avec le paramètre [tweet.fields](/fr/x-api/fundamentals/data-dictionary#tweet) défini sur `author_id`, `entities`) :

```json
{
   "data": {
       "id": "1278747501642657792",
       "text": "It's been a year since Twitter's Developer Labs launched.\n\nAs we build towards the next generation of the #TwitterAPI (coming VERY soon), see what we've learned and changed along the way. https://t.co/WvjuEWCa6G",
       "author_id": "2244994945",
       "entities": {
           "urls": [
               {
                   "start": 188,
                   "end": 211,
                   "url": "https://t.co/WvjuEWCa6G",
                   "expanded_url": "https://blog.x.com/developer/en_us/topics/tools/2020/a-year-with-twitter-developer-labs.html",
                   "display_url": "blog.x.com/developer/en_u…",
                   "images": [
                       {
                           "url": "https://pbs.twimg.com/news_img/1278747527043362816/7HQRkQeV?format=jpg&name=orig",
                           "width": 1600,
                           "height": 600
                       },
                       {
                           "url": "https://pbs.twimg.com/news_img/1278747527043362816/7HQRkQeV?format=jpg&name=150x150",
                           "width": 150,
                           "height": 150
                       }
                   ],
                   "status": 200,
                   "title": "A year with Twitter Developer Labs: What we've learned and changed",
                   "description": "Labs has been invaluable in helping us understand what works well and what doesn’t, what you liked and what you didn’t.",
                   "unwound_url": "https://blog.x.com/developer/en_us/topics/tools/2020/a-year-with-twitter-developer-labs.html"
               }
           ],
           "hashtags": [
               {
                   "start": 106,
                   "end": 117,
                   "tag": "TwitterAPI"
               }
           ]
       }
   }
}
```

<div id="authentication">
  ### Authentification
</div>

Tous les endpoints de X API v2 nécessitent une authentification. Beaucoup acceptent la méthode [OAuth 2.0 Bearer Token](/fr/resources/fundamentals/authentication#oauth-2-0), qui requiert d’inclure un jeton Bearer dans la requête adressée à l’endpoint pour qu’elle aboutisse.

Pour les endpoints nécessitant une autorisation afin de créer, manipuler ou récupérer des données au nom d’un autre utilisateur, utilisez [OAuth 1.0a User Context](/fr/resources/fundamentals/authentication). Cela implique de fournir les [clés et jetons d’API](/fr/resources/fundamentals/authentication#api-key-and-secret) de votre [application développeur](/fr/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) ainsi qu’un ensemble de [jetons d’accès](/fr/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) utilisateur que vous générez pour l’utilisateur au nom duquel vous effectuez la requête. Le [flux OAuth à 3 étapes](/fr/resources/fundamentals/authentication#obtaining-access-tokens-using-3-legged-oauth-flow) peut vous aider à récupérer des jetons d’accès. Utilisez un [outil ou une bibliothèque](/fr/x-api/tools-and-libraries/overview) qui construit automatiquement cet en-tête d’autorisation.

Plus d’informations sont disponibles dans notre documentation sur [l’authentification](/fr/resources/fundamentals/authentication).

<div id="fields">
  ### Champs
</div>

L’objet renvoyé par chaque endpoint est condensé. Pour offrir davantage de personnalisation de la réponse renvoyée par l’API, le paramètre [`fields`](/fr/x-api/fundamentals/fields) permet de demander les champs souhaités. Les champs restent cohérents d’un endpoint à l’autre. L’objet Post renverra les mêmes champs sur tous les endpoints où il est renvoyé. Le même ensemble de champs peut être demandé sur des endpoints similaires.

Par exemple, les mêmes champs de Post peuvent être demandés dans le [Posts lookup](/fr/x-api/posts/lookup/introduction) et pour le Post épinglé développé dans le [Users lookup](/fr/x-api/users/lookup/introduction).

<div id="expansions">
  ### Expansions
</div>

Le cas échéant, des [expansions](/fr/x-api/fundamentals/expansions) sont disponibles pour tous les champs d’identifiant imbriqués (par exemple, tous les champs nommés `*_id`, tels que `author_id`). Des expansions sont également proposées pour tous les champs qui contiennent un identifiant qui n’est pas l’identifiant de niveau supérieur de l’objet en cours. Par exemple, dans la [recherche de Posts](/fr/x-api/posts/lookup/introduction), le Post est l’objet en cours, avec le champ `id` comme identifiant de niveau supérieur. Les champs `author_id` ou `referenced_tweets.id` peuvent être « développés » en objets utilisateur ou Post complets en ajoutant ces valeurs, séparées par des virgules, au paramètre `expansions`.

Veuillez [signaler toute incohérence](https://twitterdevfeedback.uservoice.com/) que vous constatez concernant ces champs.