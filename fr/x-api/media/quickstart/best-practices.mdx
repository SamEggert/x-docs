---
title: Bonnes pratiques
sidebarTitle: Bonnes pratiques
---

Il y a quelques concepts importants à comprendre lors de l’utilisation du point de terminaison [`POST /2/media/upload`](/fr/x-api/media/media-upload). Le chargement de médias avec OAuth peut être un peu complexe ; nous avons donc détaillé certains points à garder en tête, ainsi qu’un exemple fonctionnel montrant comment utiliser ce point de terminaison.

<div id="keep-in-mind">
  ## À garder à l’esprit
</div>

* Vous pouvez joindre jusqu’à 4 photos, 1 GIF animé ou 1 vidéo dans une publication.
* L’image transmise doit être le binaire brut de l’image ou un binaire encodé en base64 ; il n’est pas nécessaire d’encoder ou d’échapper autrement le contenu tant que l’en-tête Content-Type est correctement défini (en cas de doute : `application/octet-stream`).
* Lors de l’envoi d’images encodées en base64, veillez à définir « Content-Transfer-Encoding: base64 » sur la partie image du message.
* Les frontières (boundaries) des messages multipart doivent figurer sur leur propre ligne et se terminer par un CRLF.
* Pour des exemples concrets de requêtes POST à l’aide de cet endpoint, nous recommandons de tester avec [xurl](https://github.com/xdevplatform/xurl). Consultez également les [bibliothèques X](/fr/resources/tools-and-libraries) disponibles.
* Utilisez le `media_id_string` fourni dans la réponse de l’API pour JavaScript et tout autre langage qui ne peut pas représenter correctement un entier long.

<div id="media-categories">
  ## Catégories de médias
</div>

Le paramètre Media Category définit le cas d’usage du fichier média à importer et peut influer sur les limites de taille ou d’autres contraintes appliquées aux imports de médias. Il est important d’utiliser la catégorie de média appropriée lors de l’import afin d’éviter des problèmes ultérieurs. Il s’agit d’une valeur facultative transmise dans la requête INIT dans le cadre du flux d’import. Si aucune catégorie de média n’est spécifiée, le média importé est supposé être destiné à une publication (`tweet_image`, `tweet_video` ou `tweet_gif`), selon le type de contenu.

Les catégories de médias les plus courantes sont les suivantes :

* `tweet_image`
* `tweet_video`
* `tweet_gif`
* `dm_image`
* `dm_video`
* `dm_gif`
* `subtitles`

Si vous êtes un partenaire de l’Ads API, veuillez consulter [cette documentation](/fr/x-ads-api/creatives#promoted-video) pour plus d’informations sur la catégorie de média recommandée pour les vidéos sponsorisées.

<div id="image-specifications-and-recommendations">
  ## Spécifications et recommandations pour les images
</div>

Les fichiers image doivent respecter tous les critères suivants :

* **Types de médias image pris en charge** : `JPG`, `PNG`, `GIF`, `WEBP`
* **Taille de l’image** : `<= 5 Mo`
* **Taille du GIF animé** : `<= 15 Mo`

La limite de taille de fichier ci-dessus est appliquée par le point de terminaison de téléversement de médias. En outre, il existe une limite de taille de fichier propre à l’entité de produit, appliquée lors de l’appel des points de terminaison de création de publication (ou similaires) avec `media_id`. La limite de taille et d’autres contraintes peuvent varier selon le paramètre `media_category`.

<div id="animated-gif-recommendations">
  ## Recommandations pour les GIF animés
</div>

Un GIF peut échouer lors de la création d’un Post même s’il respecte la limite de taille de fichier. Respectez les contraintes suivantes pour améliorer les taux de réussite.

* **Résolution** : `<= 1280x1080` (`width` x `height`)
* **Nombre d’images** : `<= 350`
* **Nombre de pixels** : `<= 300 millions` (`width` * `height` * `num_frames`)
* **Taille du fichier** : `<= 15 Mo`

Pour traiter des GIF de plus grande taille, utilisez l’endpoint [chunked upload](/fr/x-api/media/quickstart/media-upload-chunked) avec le paramètre `media_category`. Cela permet au serveur de traiter le fichier GIF de manière asynchrone, ce qui est requis pour le traitement de fichiers plus volumineux. Passez `media_category=tweet_gif` pour activer le téléversement asynchrone pour les Posts contenant un GIF animé.

<div id="video-specifications-and-recommendations">
  ## Spécifications et recommandations pour les vidéos
</div>

Veuillez utiliser le parcours asynchrone pour le téléversement des médias.

<div id="recommended">
  ### Recommandé
</div>

* **Codec vidéo** : `H264 High Profile`
* **Fréquences d’images** : `30 i/s`, `60 i/s`
* **Résolution vidéo** : `1280x720` (paysage), `720x1280` (portrait), `720x720` (carré). Les abonnés peuvent mettre en ligne une vidéo 1080p et bénéficier d’une lecture en 1080p. Les non-abonnés peuvent mettre en ligne une vidéo 720p et bénéficier d’une lecture en 720p.
* **Débit vidéo minimal** : `5 000 kb/s`
* **Débit audio minimal** : `128 kb/s`
* **Codec audio** : `AAC LC`
* **Rapport d’aspect** : `16:9` (paysage ou portrait), `1:1` (carré)

<div id="advanced">
  ### Avancé
</div>

* **Fréquence d’images** : doit être de `60 FPS` ou moins
* **Dimensions** : doivent être comprises entre `32x32` et `1280x1024`
* **Taille du fichier** : ne doit pas dépasser `512 Mo`
* **Durée** : doit être comprise entre `0,5 seconde` et `140 secondes`
* **Ratio d’aspect** : doit être compris entre `1:3` et `3:1`
* **[Ratio d’aspect des pixels](https://en.wikipedia.org/wiki/Pixel_aspect_ratio)** : doit être de `1:1`
* **Format de pixels** : seul le [YUV](https://en.wikipedia.org/wiki/YUV) 4:2:0 est pris en charge
* Le son doit être [AAC avec profil Low Complexity](https://en.wikipedia.org/wiki/Advanced_Audio_Coding#Modular_encoding). (L’AAC High-Efficiency n’est pas pris en charge)
* Le son doit être en `mono` ou en `stéréo`, pas en 5.1 ou plus
* Ne doit pas utiliser de [`open GOP`](https://en.wikipedia.org/wiki/Group_of_pictures)
* Doit utiliser le [`progressive scan`](https://en.wikipedia.org/wiki/Progressive_scan)

<div id="additional-information">
  ### Informations supplémentaires
</div>

Dans le tableau ci-dessous, chaque ligne correspond à une recommandation de mise en ligne, sans caractère obligatoire. Toutes les mises en ligne sont optimisées pour plusieurs plateformes.

| Orientation | Largeur | Hauteur | Débit vidéo | Débit audio |
| :--- | :--- | :--- | :--- | :--- |
| Paysage | 1280 | 720 | 2048 K | 128 K |
| Paysage | 640 | 360 | 768 K | 64 K |
| Paysage | 320 | 180 | 256 K | 64 K |
| Portrait | 720 | 1280 | 2048 K | 128 K |
| Portrait | 360 | 640 | 768 K | 64 K |
| Portrait | 180 | 320 | 256 K | 64 K |
| Carré | 720 | 720 | 2048 K | 128 K |
| Carré | 480 | 480 | 768 K | 64 K |
| Carré | 240 | 240 | 256 K | 32 K |

Pour un exemple de mise en ligne de médias, consultez la [documentation sur l’envoi de médias par segments](/fr/x-api/media/quickstart/media-upload-chunked).

<div id="troubleshooting">
  ### Dépannage
</div>

En cas de problème avec les API Media, consultez la [catégorie Media API](https://devcommunity.x.com/c/x-api/media-apis) des forums développeurs pour trouver une réponse.