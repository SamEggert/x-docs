---
title: Récupérer des posts historiques à l’aide du point de terminaison de recherche de l’archive complète v2
mode: wide
---

<div id="introduction">
  ## Introduction
</div>

Les [endpoints Search Posts](/fr/x-api/posts/search/introduction)
dans l’environnement v2 vous permettent de recevoir des Posts liés à des sujets d’intérêt,
en fonction d’une requête de recherche que vous formulez. Nous proposons deux endpoints
distincts avec v2 Search Posts : la recherche récente, accessible à tous
les développeurs disposant d’un compte approuvé et qui permet de rechercher des Posts jusqu’à sept jours
en arrière, et la recherche dans l’archive complète, réservée aux
chercheurs approuvés pour le
[parcours produit Academic Research](https://developer.x.com/en/products/x-api/early-access/guide#na_2),
et qui permet d’explorer l’intégralité de l’archive des Posts remontant à mars 2006.

Vous pouvez consulter l’ensemble de notre offre de recherche sur la
[page d’aperçu de la recherche](/fr/x-api/posts/search/introduction).

Ces endpoints Search Posts répondent à l’un des cas d’usage les plus courants des
chercheurs académiques, qui peuvent les utiliser pour des études longitudinales ou pour analyser
un sujet ou un événement passé.

Ce tutoriel propose un guide pas à pas pour les chercheurs souhaitant utiliser l’endpoint
de recherche dans l’archive complète afin d’examiner l’historique complet des données publiques X.
Il présentera également différentes manières de constituer un jeu de données, par exemple en
récupérant des Posts géolocalisés, et expliquera comment parcourir les Posts disponibles pour une
requête.

<div id="prerequisites">
  ### Prérequis
</div>

Actuellement, ce point de terminaison n’est disponible que dans le cadre de la
[filère produit Academic Research](https://developer.x.com/en/solutions/academic-research/products-for-researchers).
Pour utiliser ce point de terminaison, vous devez
[faire une demande d’accès](https://developer.x.com/en/portal/petition/academic/is-it-right-for-you).
En savoir plus sur
[la procédure de candidature et les exigences pour cette filière](https://developer.x.com/en/solutions/academic-research/application-info).

<div id="connect-an-app-to-the-academic-project">
  ### Connecter une application au projet académique
</div>

Une fois que vous avez été approuvé pour utiliser la filière Academic Research, vous verrez
votre [projet](/fr/resources/fundamentals/projects) académique dans le
[portail développeur](https://developer.x.com/en/portal/dashboard). Dans la section
« Projects and Apps », cliquez sur « Add App » pour connecter votre
[application X](/fr/resources/fundamentals/developer-apps) au projet.

[](https://res.cloudinary.com/practicaldev/image/fetch/s--gHFOyuDc--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/gb7aevhqyfvfjznd0pnd.png)

![Cette image affiche un projet académique dans le portail développeur auquel aucune application n’a encore été ajoutée](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-1.png.twimg.1920.png)

Ensuite, vous pouvez soit choisir une application existante et la connecter à votre projet (comme
indiqué ci-dessous).

![Cette image montre la page qui s’affiche lorsque vous essayez d’ajouter une application à votre projet académique](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-2.png.twimg.1920.png)

Ou vous pouvez créer une nouvelle application, lui donner un nom et cliquer sur « Complete », pour connecter une nouvelle
application à votre projet académique.

![Cette image montre la page où vous saisirez un nom pour votre nouvelle application, ou qui vous permet de sélectionner une application existante](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-3.png.twimg.1920.png)

Cela vous fournira vos clés API et
[jeton Bearer](/fr/resources/fundamentals/authentication#using-and-generating-an-app-only-bearer-token) que vous pourrez
ensuite utiliser pour vous connecter au point de terminaison de recherche dans l’archive complète.

![Cette image montre la page affichée après la création d’une nouvelle application avec vos clés et jetons](https://cdn.cms-twdigitalassets.com/content/dam/developer-twitter/docs/tutorials/getting-historical-tweets-using-the-full-archive-search-endpoint/dev-portal-4.png.twimg.1920.png)

**Veuillez noter**

Les clés dans la capture d’écran ci-dessus sont masquées, mais dans votre propre portail développeur,
vous pourrez voir les valeurs réelles pour la clé API (API Key), la clé secrète API (API Secret Key) et le
jeton Bearer. Enregistrez ces clés et le jeton Bearer, car vous en aurez besoin
pour appeler le point de terminaison de recherche dans l’archive complète.

<div id="connecting-to-the-full-archive-search-endpoint">
  ### Connexion à l’endpoint de recherche sur l’archive complète
</div>

La commande cURL ci-dessous montre comment récupérer des Posts historiques depuis le compte @XDevelopers.
Remplacez $BEARER&#95;TOKEN par votre propre Bearer Token, collez la requête complète
dans votre terminal, puis appuyez sur « Entrée ».

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:xdevelopers' --header 'Authorization: Bearer $BEARER_TOKEN'
```

Vous verrez la réponse au format JSON.

Par défaut, seuls les 10 Posts les plus récents sont renvoyés. Si vous souhaitez plus
de 10 Posts par requête, vous pouvez utiliser le paramètre max&#95;results et le définir à
un maximum de 500 Posts par requête, comme indiqué ci-dessous :

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:xdevelopers&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

###

Créer des requêtes

Comme vous pouvez le voir dans les exemples d’appels ci-dessus, en utilisant le paramètre query, vous pouvez
spécifier les données que vous souhaitez rechercher. Par exemple, si vous souhaitez
récupérer tous les Posts contenant le mot *covid* ou le mot *coronavirus*, vous pouvez
utiliser l’opérateur OR entre parenthèses, et votre requête peut être
`(covid OR coronavirus)` ; votre appel à l’API ressemblera alors à ce qui suit :

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=(covid%20OR%20coronavirus)&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

De même, si vous voulez tous les Posts qui contiennent le mot *covid19* et qui ne sont pas
des republications, vous pouvez utiliser l’opérateur is:retweet avec la négation logique (représentée
par -), ainsi votre requête peut être covid19 -is:retweet et votre appel à l’API sera :

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=covid19%20-is:retweet&max_results=500' --header 'Authorization: Bearer $BEARER_TOKEN'
```

Consultez
[ce guide pour la liste complète des opérateurs](/fr/x-api/posts/search/integrate/build-a-query)
pris en charge par l’endpoint de recherche sur l’archive complète.

### Utilisation des paramètres start&#95;time et end&#95;time pour récupérer des Posts historiques

Lorsque vous utilisez l’endpoint de recherche sur l’ensemble des archives, par défaut, les Posts des 30
derniers jours sont renvoyés. Si vous souhaitez récupérer des Posts plus anciens que 30 jours,
vous pouvez utiliser les paramètres start&#95;time et end&#95;time dans votre appel API. Ces
paramètres doivent être au format date-heure RFC3339 valide, par exemple
2020-12-21T13:00:00.00Z. Ainsi, si vous souhaitez récupérer tous les Posts du compte XDevelopers
pour le mois de décembre 2020, votre appel API sera :

```bash
curl --request GET 'https://api.x.com/2/tweets/search/all?query=from:XDevelopers&start_time=2020-12-01T00:00:00.00Z&end_time=2021-01-01T00:00:00.00Z' --header 'Authorization: Bearer $BEARER_TOKEN'
```

###

Récupérer des Posts historiques géolocalisés

Les Posts géolocalisés sont des Posts associés à des informations géographiques,
telles que la ville, l’État, le pays, etc.

<div id="using-hasgeo-operator">
  #### Utilisation de l’opérateur has:geo
</div>

Si vous souhaitez obtenir des Posts contenant des données géographiques, vous pouvez utiliser l’opérateur has:geo.
Par exemple, la requête cURL suivante ne récupérera que les Posts du compte
@XDevelopers qui contiennent des données géographiques :

```
curl --request GET
'https://api.x.com/2/tweets/search/all?query=from:xdevelopers%20has:geo' --header
'Authorization: Bearer $BEARER_TOKEN'
```

#### Utilisation de l’opérateur place&#95;country

De la même manière, vous pouvez limiter les Posts comportant des données de géolocalisation à un pays donné en utilisant l’opérateur place&#95;country. La commande cURL ci-dessous récupérera tous les Posts du compte @XDevelopers provenant des États-Unis :

```
curl --request GET
'https://api.x.com/2/tweets/search/all?query=from:xdevelopers%20place_country:US'
--hbasheader 'Authorization: Bearer XXXXX'
```

Le pays est indiqué ci-dessus à l’aide du code ISO alpha-2. Les codes ISO valides sont disponibles [ici](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2).

### Obtenir plus de 500 Posts historiques à l’aide de next&#95;token

Comme mentionné ci-dessus, par défaut, vous ne pouvez récupérer que jusqu’à 500 Posts par requête pour
une requête vers le point de terminaison de recherche de l’archive complète. S’il y a plus de 500 Posts
disponibles pour votre requête, votre réponse JSON inclura un next&#95;token que vous
pouvez ajouter à votre appel d’API afin d’obtenir les prochains Posts disponibles pour cette
requête. Ce next&#95;token est disponible dans l’objet meta de votre réponse JSON,
qui ressemble à ceci :

```
{ "newest_id": "12345678...", "oldest_id": "12345678...", "result_count": 500,
"next_token": "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" }
```

Ainsi, pour obtenir les prochains Posts disponibles, utilisez la valeur de next&#95;token de cet objet meta
et utilisez cette valeur comme valeur pour next&#95;token dans votre appel d’API vers le
point de terminaison de recherche de l’archive complète comme indiqué ci-dessous (vous utiliserez votre propre Bearer Token
et la valeur que vous avez reçue pour le Next Token lors de votre appel d’API précédent).

```
curl --request GET
'https://api.x.com/2/tweets/search/all?max_results=500&query=covid&next_token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'
--header 'Authorization: Bearer $BEARER_TOKEN'
```

De cette manière, vous pouvez continuer à vérifier si un next&#95;token est disponible et, si vous n’avez pas
atteint le nombre souhaité de Posts à collecter, vous pouvez continuer à appeler
le point de terminaison de l’archive complète avec le nouveau next&#95;token pour chaque requête. Gardez à l’esprit
que le point de terminaison de recherche de l’archive complète est pris en compte dans votre
[Post cap](/fr/x-api/fundamentals/post-cap), c’est-à-dire le nombre de
Posts par mois que vous pouvez obtenir via l’API X par
[Project](/fr/resources/fundamentals/projects). Soyez donc attentif à la logique de votre code lors de la pagination
des résultats afin de vous assurer de ne pas
épuiser involontairement votre Post cap.

Vous trouverez ci-dessous quelques ressources pour vous aider lors de l’utilisation du point de terminaison de recherche
de l’archive complète. Nous serions ravis de recueillir vos retours. Contactez-nous sur
[@XDevelopers](https://x.com/XDevelopers) ou sur nos
[forums de la communauté](https://devcommunity.x.com/) pour toute question concernant ce
point de terminaison.

<div id="additional-resources">
  ### Ressources supplémentaires
</div>

* [Référence de l’API pour l’endpoint de recherche sur l’ensemble de l’archive](/fr/x-api/posts/full-archive-search)
* [Notions de base pour construire une requête de recherche](/fr/x-api/posts/search/integrate/build-a-query)